---
import type { CategoryFragment } from '../lib/sanity';
import { getContrast } from '../lib/util';

export interface Props {
  category: CategoryFragment;
  class?: string;
}

const { category, class: className } = Astro.props;
const { color, icon, title } = category;
---

<div
  class:list={['category-badge', 'badge', className]}
  style={{
    backgroundColor: color ?? '#f5f5f5',
    color: getContrast(color ?? '#f5f5f5'),
  }}
>
  {
    icon && (
      <span role="img" aria-label={icon.description}>
        {icon.icon}
      </span>
    )
  }
  {title}
</div>
